<!DOCTYPE html>
<html lang="en">
<head>
    <title>YUNEXPRESS - AR QUICK LOOK HUB</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    
    <style>
        :root {
            --app-bg: #0b0e14;
            --yun-orange: #ff6a00; 
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent: #ff9d5c;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: var(--app-bg);
            font-family: 'Inter', sans-serif;
        }

        /* --- START SCREEN --- */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0b0e14; z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }

        .yun-logo {
            width: 70px; height: 35px; margin-bottom: 20px;
            display: inline-flex; justify-content: center; align-items: center;
            font-weight: 900; color: white; background: var(--yun-orange);
            border-radius: 4px; font-style: italic;
        }

        .commence-btn {
            background: transparent; color: white; border: 1px solid var(--yun-orange);
            padding: 12px 30px; border-radius: 4px; cursor: pointer; text-transform: uppercase;
        }

        /* --- VIEWER --- */
        model-viewer { width: 100vw; height: 100vh; background-color: #0f141d; }

        .app-overlay {
            position: absolute; top: 20px; left: 50%;
            transform: translateX(-50%); z-index: 100;
            width: 90%; max-width: 450px;
        }

        .control-panel {
            background: var(--glass); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border); padding: 15px; border-radius: 12px;
            display: flex; flex-direction: column; gap: 10px;
        }

        .panel-label { font-size: 10px; color: var(--accent); text-transform: uppercase; font-weight: 800; }

        select {
            background: rgba(255,255,255,0.1); color: white; border: none;
            padding: 10px; border-radius: 6px; font-weight: bold; width: 100%;
        }

        /* AR QUICK LOOK BUTTON */
        #ar-button {
            position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%);
            background: white; color: black; border: none;
            padding: 18px 36px; border-radius: 50px; font-weight: 900;
            cursor: pointer; z-index: 50; text-transform: uppercase; font-size: 14px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex; align-items: center; gap: 10px;
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <div class="yun-logo">YUN</div>
        <button class="commence-btn" onclick="enterApp()">Launch AR Tracker</button>
    </div>

    <div class="app-overlay">
        <div class="control-panel">
            <span class="panel-label">Asset Selection</span>
            <select id="model-select"></select>
        </div>
    </div>

    <model-viewer id="main-viewer" 
                  ar 
                  ar-modes="quick-look webxr scene-viewer" 
                  camera-controls 
                  auto-rotate 
                  shadow-intensity="1"
                  ar-scale="auto"
                  quick-look-browsers="safari chrome">
        <button slot="ar-button" id="ar-button">
            <span>ðŸ“¦</span> VIEW IN YOUR SPACE
        </button>
    </model-viewer>

<script>
    const modelData = [
        {
            "name": "TLD 121 Aircraft Loader",
            "usdz_file": "TLD_121_Aircraft_loader"
        },
        {
            "name": "Airport Baggage Truck",
            "usdz_file": "Airport_Baggage_Truck"
        },
        {
            "name": "Airport Catering Truck",
            "usdz_file": "Airport_Catering_Truck"
        },
        {
            "name": "Ground Power Unit (GPU)",
            "usdz_file": "GPU_Aiport_Ground_Power_Unit"
        }
    ];

    function enterApp() {
        document.getElementById('start-screen').style.opacity = '0';
        setTimeout(() => document.getElementById('start-screen').style.display = 'none', 500);
    }

    const viewer = document.querySelector('#main-viewer');
    const modelSelect = document.querySelector('#model-select');

    function initializeApp() {
        modelSelect.innerHTML = ''; 
        modelData.forEach((m, index) => {
            const opt = document.createElement('option');
            opt.value = index;
            opt.textContent = m.name;
            modelSelect.appendChild(opt);
        });
        updateAsset(0);
    }

    function updateAsset(index) {
        const asset = modelData[index];
        const filePath = `models/${asset.usdz_file}.usdz`;
        
        // Setting BOTH src and ios-src to the USDZ file.
        // Note: model-viewer will try to use src for the web-preview,
        // but iOS will prioritize ios-src for the Quick Look experience.
        viewer.src = filePath;
        viewer.setAttribute('ios-src', filePath);
    }

    modelSelect.addEventListener('change', (e) => updateAsset(e.target.value));
    initializeApp();
</script>

</body>
</html>
